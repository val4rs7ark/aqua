<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper     PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"     "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mybatis.mapper.HRMapper">
	<select id="HRSalery_insert" parameterType="map" resultType="map">
		select empno,emp_name,resident_no,emp_hp,emp_indate,dept_name||'-'||team_name emp_sosoc,emp_bank||'은행' emp_back,sal_account,em.emp_sal emp_sal from emp em, dept dt
		 where em.dept_code = dt.dept_code
	</select>
	<insert id="HRSalery_insert_commit" parameterType="map">
		insert into salary(sal_no,empno,sal_default,sal_plus,sal_over,sal_rest,
						sal_etc,sal_rice,sal_drive,sal_life,sal_tel,sal_level,sal_baby,
						tax_soduc,tax_jungsan,tax_chon,tax_nocheck,tax_kukmin,tax_long,
						tax_health,tax_pain,tax_work,tax_etc_sudang,sal_when,
						sal_total,sal_etc_detail,tax_etc_sudang_dt,sal_regdate,sal_writer,sal_gubun)
		 values((select max(sal_no)+1 from salary),#{empno},#{sal_default},#{sal_plus},#{sal_over},#{sal_rest},
		 #{sal_etc},#{sal_rice},#{sal_drive},#{sal_life},#{sal_tel},#{sal_level},#{sal_baby},
		 #{tax_soduc},#{tax_jungsan},#{tax_chon},#{tax_nocheck},#{tax_kukmin},#{tax_long},
		 #{tax_health},#{tax_pain},#{tax_work},#{tax_etc_sudang},#{sal_when},
		 #{sal_total},#{sal_etc_detail},#{tax_etc_sudang_dt},to_char(sysdate,'yyyy-mm-dd/hh24:mi'),#{sal_writer},1)
	</insert>
	<insert id="HRSalery_insert_commit_one" parameterType="map">
		insert into salary(sal_no,empno,sal_default,sal_over,sal_rice,sal_drive,sal_life,sal_tel,tax_soduc,tax_kukmin,tax_long,
						tax_health,tax_pain,tax_work,tax_etc_sudang,sal_one_date,sal_whensal_total,tax_etc_sudang_dt,sal_regdate,
						sal_writer,sal_gubun)
		 values((select max(sal_no)+1 from salary),#{empno},#{sal_default},#{sal_over},#{sal_rice},#{sal_drive},#{sal_life},
		 #{sal_tel},#{tax_soduc},#{tax_kukmin},#{tax_long},#{tax_health},#{tax_pain},#{tax_work},#{tax_etc_sudang},#{sal_one_date},
		 #{sal_when},#{sal_total},#{tax_etc_sudang_dt},to_char(sysdate,'yyyy-mm-dd/hh24:mi'),#{sal_writer},2)
	</insert>
</mapper> 